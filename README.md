# ğŸ³ Dockeré•œåƒä»£ç†æœåŠ¡

ä¸€ä¸ªæç®€çš„Webåº”ç”¨ï¼Œå¸®åŠ©ç”¨æˆ·å°†å›½å¤–é•œåƒä»“åº“çš„é•œåƒä¸‹è½½å¹¶è½¬å­˜åˆ°å›½å†…çš„ç§æœ‰ä»“åº“ä¸­ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- ğŸ¯ **ç®€å•æ˜“ç”¨**: å¯è§†åŒ–Webç•Œé¢ï¼Œæ”¯æŒä¸€é”®é•œåƒä»£ç†
- ğŸ”„ **è‡ªåŠ¨è§£æ**: æ™ºèƒ½è§£æå„ç§é•œåƒåç§°æ ¼å¼
- ğŸ“Š **å†å²è®°å½•**: å®Œæ•´çš„ä»£ç†å†å²å’Œç»Ÿè®¡ä¿¡æ¯
- ğŸ” **å®‰å…¨è®¤è¯**: Tokenè®¤è¯æœºåˆ¶ä¿æŠ¤æœåŠ¡å®‰å…¨
- ğŸ³ **å®¹å™¨åŒ–**: å®Œæ•´çš„Dockeréƒ¨ç½²æ–¹æ¡ˆ
- ğŸš€ **é«˜æ€§èƒ½**: åŸºäºGoå’ŒReactçš„é«˜æ€§èƒ½å®ç°

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
docker-transformer/
â”œâ”€â”€ README.md                   # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ go.mod                     # Goæ¨¡å—é…ç½®
â”œâ”€â”€ main.go                    # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ Dockerfile                 # Dockeré•œåƒæ„å»º
â”œâ”€â”€ docker-compose.yml         # å®¹å™¨ç¼–æ’é…ç½®
â”œâ”€â”€ nginx.conf                 # Nginxåå‘ä»£ç†é…ç½®
â”œâ”€â”€ .dockerignore              # Dockerå¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ config/                    # é…ç½®ç®¡ç†
â”‚   â””â”€â”€ config.go
â”œâ”€â”€ database/                  # æ•°æ®åº“ç›¸å…³
â”‚   â”œâ”€â”€ sqlite.go
â”‚   â””â”€â”€ migrations.sql
â”œâ”€â”€ models/                    # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ config.go
â”‚   â””â”€â”€ response.go
â”œâ”€â”€ services/                  # ä¸šåŠ¡æœåŠ¡
â”‚   â”œâ”€â”€ docker_service.go
â”‚   â””â”€â”€ image_service.go
â”œâ”€â”€ handlers/                  # HTTPå¤„ç†å™¨
â”‚   â”œâ”€â”€ auth.go
â”‚   â”œâ”€â”€ proxy.go
â”‚   â”œâ”€â”€ history.go
â”‚   â””â”€â”€ image.go
â”œâ”€â”€ middlewares/               # ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ auth.go
â”‚   â””â”€â”€ cors.go
â”œâ”€â”€ utils/                     # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ logger.go
â”‚   â””â”€â”€ validator.go
â”œâ”€â”€ web/                       # Reactå‰ç«¯
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ public/index.html
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ App.jsx            # ä¸»åº”ç”¨ç»„ä»¶
â”‚       â”œâ”€â”€ App.css           # æ ·å¼æ–‡ä»¶
â”‚       â”œâ”€â”€ index.js          # å…¥å£æ–‡ä»¶
â”‚       â”œâ”€â”€ components/       # é€šç”¨ç»„ä»¶
â”‚       â”‚   â”œâ”€â”€ ProxyForm.jsx
â”‚       â”‚   â”œâ”€â”€ StatusDisplay.jsx
â”‚       â”‚   â””â”€â”€ HistoryList.jsx
â”‚       â”œâ”€â”€ pages/            # é¡µé¢ç»„ä»¶
â”‚       â”‚   â”œâ”€â”€ LoginPage.jsx
â”‚       â”‚   â””â”€â”€ MainPage.jsx
â”‚       â””â”€â”€ services/         # APIæœåŠ¡
â”‚           â””â”€â”€ api.js
â”œâ”€â”€ scripts/                   # éƒ¨ç½²è„šæœ¬
â”‚   â”œâ”€â”€ start.sh              # å¯åŠ¨è„šæœ¬
â”‚   â””â”€â”€ stop.sh               # åœæ­¢è„šæœ¬
â””â”€â”€ data/                      # æ•°æ®ç›®å½•
    â””â”€â”€ .gitkeep
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼1: Dockeréƒ¨ç½²ï¼ˆæ¨èï¼‰

#### å‰ææ¡ä»¶
- Docker 20.10+
- Docker Compose 2.0+

#### ä¸€é”®å¯åŠ¨
```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd docker-transformer

# å¯åŠ¨æœåŠ¡
./scripts/start.sh

# æˆ–è€…å¸¦Nginxåå‘ä»£ç†
./scripts/start.sh --with-nginx
```

#### æ‰‹åŠ¨å¯åŠ¨
```bash
# æ„å»ºå¹¶å¯åŠ¨
docker-compose up --build -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# åœæ­¢æœåŠ¡
docker-compose down
```

### æ–¹å¼2: æœ¬åœ°å¼€å‘

#### åç«¯å¯åŠ¨
```bash
# ä¸‹è½½Goä¾èµ–
go mod tidy

# è¿è¡Œåç«¯æœåŠ¡
go run main.go
```

#### å‰ç«¯å¯åŠ¨
```bash
# è¿›å…¥å‰ç«¯ç›®å½•
cd web

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm start
```

## ğŸ¯ ä½¿ç”¨æŒ‡å—

### 1. ç™»å½•ç³»ç»Ÿ
- è®¿é—®: `http://localhost:8080`
- é»˜è®¤Token: `docker-transformer`

### 2. ä»£ç†é•œåƒ
1. è¾“å…¥æºé•œåƒåç§°ï¼ˆå¦‚: `nginx:latest`ï¼‰
2. ç‚¹å‡»"è§£æ"æŒ‰é’®éªŒè¯é•œåƒæ ¼å¼
3. é…ç½®ç›®æ ‡ä»“åº“ä¿¡æ¯
4. ç‚¹å‡»"å¼€å§‹ä»£ç†"æ‰§è¡Œé•œåƒè½¬å­˜

### 3. æŸ¥çœ‹å†å²
- åœ¨å†å²è®°å½•åŒºåŸŸæŸ¥çœ‹æ‰€æœ‰ä»£ç†æ“ä½œ
- æ”¯æŒå¤åˆ¶é•œåƒåœ°å€å’ŒæŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

åˆ›å»º `.env` æ–‡ä»¶é…ç½®ç¯å¢ƒå˜é‡ï¼š

```bash
# æœåŠ¡å™¨é…ç½®
PORT=8080
GIN_MODE=release

# æ—¥å¿—é…ç½®
LOG_LEVEL=info

# æ•°æ®åº“é…ç½®
DB_PATH=./data/proxy.db

# è®¤è¯é…ç½®
DEFAULT_TOKEN=docker-transformer

# Dockeré…ç½® (å¯é€‰)
# DOCKER_HOST=unix:///var/run/docker.sock
```

### ç›®æ ‡ä»“åº“æ”¯æŒ

æ”¯æŒä»¥ä¸‹ç±»å‹çš„ç§æœ‰ä»“åº“ï¼š
- Harbor
- Docker Registry
- é˜¿é‡Œäº‘å®¹å™¨é•œåƒæœåŠ¡
- è…¾è®¯äº‘å®¹å™¨é•œåƒæœåŠ¡
- å…¶ä»–å…¼å®¹Docker Registry APIçš„ä»“åº“

## ğŸ“‹ APIæ–‡æ¡£

### è®¤è¯æ¥å£
- `POST /api/auth/login` - ç”¨æˆ·ç™»å½•
- `POST /api/auth/logout` - ç”¨æˆ·é€€å‡º
- `POST /api/auth/change-token` - ä¿®æ”¹Token

### é•œåƒæ¥å£
- `POST /api/image/parse` - è§£æé•œåƒåç§°
- `POST /api/image/build-target` - æ„å»ºç›®æ ‡é•œåƒåç§°

### ä»£ç†æ¥å£
- `POST /api/proxy/start` - å¼€å§‹é•œåƒä»£ç†

### å†å²æ¥å£
- `GET /api/history` - è·å–ä»£ç†å†å²
- `GET /api/history/stats` - è·å–ç»Ÿè®¡ä¿¡æ¯
- `DELETE /api/history` - æ¸…ç©ºå†å²è®°å½•

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### åç«¯æŠ€æœ¯æ ˆ
- **Go 1.21+**: ä¸»è¦ç¼–ç¨‹è¯­è¨€
- **Gin**: Webæ¡†æ¶
- **SQLite**: æ•°æ®åº“
- **Docker SDK**: å®¹å™¨æ“ä½œ

### å‰ç«¯æŠ€æœ¯æ ˆ
- **React 18**: å‰ç«¯æ¡†æ¶
- **Ant Design 5**: UIç»„ä»¶åº“
- **Axios**: HTTPå®¢æˆ·ç«¯

### ä»£ç ç»“æ„
- é‡‡ç”¨MVCæ¶æ„æ¨¡å¼
- æœåŠ¡å±‚å°è£…ä¸šåŠ¡é€»è¾‘
- ä¸­é—´ä»¶å¤„ç†æ¨ªåˆ‡å…³æ³¨ç‚¹
- ç»„ä»¶åŒ–çš„å‰ç«¯æ¶æ„

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **Dockerè¿æ¥å¤±è´¥**
   ```bash
   # æ£€æŸ¥Dockeræ˜¯å¦è¿è¡Œ
   docker info
   
   # æ£€æŸ¥Docker socketæƒé™
   ls -la /var/run/docker.sock
   ```

2. **é•œåƒæ‹‰å–å¤±è´¥**
   - æ£€æŸ¥ç½‘ç»œè¿æ¥
   - éªŒè¯é•œåƒåç§°æ˜¯å¦æ­£ç¡®
   - ç¡®è®¤æºé•œåƒä»“åº“å¯è®¿é—®

3. **æ¨é€å¤±è´¥**
   - éªŒè¯ç›®æ ‡ä»“åº“åœ°å€å’Œè®¤è¯ä¿¡æ¯
   - æ£€æŸ¥æ¨é€æƒé™
   - ç¡®è®¤ç›®æ ‡é¡¹ç›®æ˜¯å¦å­˜åœ¨

4. **æœåŠ¡å¯åŠ¨å¤±è´¥**
   ```bash
   # æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
   docker-compose logs -f docker-transformer
   
   # æ£€æŸ¥ç«¯å£å ç”¨
   netstat -tlnp | grep 8080
   ```

### æ—¥å¿—æŸ¥çœ‹
```bash
# Docker Composeæ—¥å¿—
docker-compose logs -f

# å®¹å™¨å†…æ—¥å¿—
docker exec -it docker-transformer tail -f /var/log/app.log
```

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

- **é•œåƒä»£ç†æ—¶é—´**: é€šå¸¸ < 5åˆ†é’Ÿï¼ˆå–å†³äºé•œåƒå¤§å°å’Œç½‘ç»œï¼‰
- **ç•Œé¢å“åº”æ—¶é—´**: < 200ms
- **å¹¶å‘æ”¯æŒ**: æ”¯æŒå¤šç”¨æˆ·åŒæ—¶ä½¿ç”¨
- **èµ„æºå ç”¨**: CPU < 500MB, å†…å­˜ < 1GB

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

## ğŸ†˜ æ”¯æŒ

å¦‚æœæ‚¨é‡åˆ°é—®é¢˜æˆ–éœ€è¦å¸®åŠ©ï¼š

1. æŸ¥çœ‹ [æ•…éšœæ’é™¤](#-æ•…éšœæ’é™¤) éƒ¨åˆ†
2. æœç´¢ç°æœ‰çš„ [Issues](../../issues)
3. åˆ›å»ºæ–°çš„ [Issue](../../issues/new)

## ğŸ é¡¹ç›®çŠ¶æ€

- âœ… **æ ¸å¿ƒåŠŸèƒ½**: é•œåƒä»£ç†ã€è§£æã€å†å²è®°å½•
- âœ… **ç”¨æˆ·ç•Œé¢**: å®Œæ•´çš„Webæ“ä½œç•Œé¢
- âœ… **éƒ¨ç½²æ–¹æ¡ˆ**: Dockerå®¹å™¨åŒ–éƒ¨ç½²
- âœ… **æ–‡æ¡£**: å®Œæ•´çš„ä½¿ç”¨å’Œå¼€å‘æ–‡æ¡£

**å½“å‰ç‰ˆæœ¬**: v1.0.0
**å¼€å‘çŠ¶æ€**: ç”Ÿäº§å°±ç»ª 